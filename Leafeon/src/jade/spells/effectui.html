<import from="./conditioncomponent"></import>

<!-- Collapse -->
<div class="d-flex gap-2">
    <button type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample${effect.uid}"
        aria-expanded="${parent.isSpell ? true : false}" aria-controls="collapseExample">
        #${effect.uid}:${effect.type}
    </button>
    <button class="ms-auto" class="deleteEffect" click.trigger="deleteEffect(effect)">
        <span>-</span>
    </button>
</div>
<div id="collapseExample${effect.uid}" class="collapse ${parent.isSpell ? 'show' : ''}">
    <div class="d-flex gap-3">
        <div style="height: 100%;">
            <h6>Effect Data</h6>
            <!-- Effect Data -->
            <table class="effecttable">
                <tbody>
                    <tr>
                        <td>Type</td>
                        <td align="right">
                            <select value.bind="effect.type" change.trigger="save()">
                                <option repeat.for="type of db.effectTypes" model.bind="type">${type}</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Data</td>
                        <td align="right">
                            <input type="text" value.bind="effect.data" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Necessary to cast</td>
                        <td align="right">
                            <input type="checkbox" checked.bind="effect.necessaryForSpellCast"
                                change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Visible in tooltip</td>
                        <td align="right">
                            <input type="checkbox" value.bind="effect.visibleInTooltip" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Target mask</td>
                        <td align="right">
                            <input type="text" value.bind="effect.targetMask" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Tower direction</td>
                        <td align="right">
                            <input type="text" value.bind="effect.towerDirection" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Tower start</td>
                        <td align="right">
                            <input type="text" value.bind="effect.towerStart" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Tower length</td>
                        <td align="right">
                            <input type="text" value.bind="effect.towerLength" change.trigger="save()" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Conditions -->
        <div style="width: 100%">
            <h6>Effect Condition</h6>
            <conditioncomponent condition.bind="effect.condition" parent.bind="effect"></conditioncomponent>
        </div>
    </div>

    <!-- Children -->
    <div class="d-flex gap-3" style="width: 100%">
        <i>Children</i>
        <button class="addEffect" click.trigger="addEffect()">
            <span>+</span>
        </button>
    </div>
    <effectui repeat.for="child of effect.effects" effect.bind="child" parent.bind="effect"></effectui>
</div>
