<import from="../conditions/condition"></import>
<import from="./effectdata"></import>
<import from="../../components/zone"></import>

<!-- Options -->
<div class="d-flex gap-2">
    <!-- Collapse -->
    <button type="button" class="btn btn-outline-dark" data-bs-toggle="collapse" data-bs-target="#collapseExample${effect.uid}"
        aria-expanded="${parent.isSpell ? true : false}" aria-controls="collapseExample">
        #${effect.uid}: ${effect.type}
    </button>
    <button click.delegate="moveDown()">
        v
    </button>
    <button click.delegate="moveUp()">
        ^
    </button>
    <!-- Delete -->
    <button class="btn btn-outline-dark ms-auto deleteEffect" click.trigger="deleteEffect(effect)">
        <span>-</span>
    </button>
</div>

<!-- Data -->
<div id="collapseExample${effect.uid}" class="collapse ${parent.isSpell ? 'show' : ''}">
    <div class="d-flex gap-4">
        <div style="height: 100%;">
            <!-- width: 50%; -->
            <h6>Effect Data</h6>
            <!-- Effect Data -->
            <!-- <effecttable effect.bind="effect" db.bind="db"></effecttable> -->
            <table class="effecttable">
                <tbody>
                    <tr>
                        <td>Type</td>
                        <td align="right">
                            <select value.bind="effect.type" change.trigger="save()">
                                <option repeat.for="type of db.effectTypes" model.bind="type">${type}</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Data</td>
                        <td align="right">
                            <!-- <input type="text" value.bind="effect.data" change.trigger="save()" /> -->
                            <effectdata effect.bind="effect"></effectdata>
                        </td>
                    </tr>
                    <tr>
                        <td>Necessary to cast</td>
                        <td align="right">
                            <input type="checkbox" checked.bind="effect.necessaryForSpellCast"
                                change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Visible in tooltip</td>
                        <td align="right">
                            <input type="checkbox" checked.bind="effect.visibleInTooltip" change.trigger="save()" />
                        </td>
                    </tr>
                    <!-- <tr>
                        <td>Target mask</td>
                        <td align="right">
                            <input type="text" value.bind="effect.targetMask" change.trigger="save()" />
                        </td>
                    </tr> -->
                    <tr>
                        <td>Tower direction</td>
                        <td align="right">
                            <input type="text" value.bind="effect.towerDirection" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Tower start</td>
                        <td align="right">
                            <input type="text" value.bind="effect.towerStart" change.trigger="save()" />
                        </td>
                    </tr>
                    <tr>
                        <td>Tower length</td>
                        <td align="right">
                            <input type="text" value.bind="effect.towerLength" change.trigger="save()" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- <div style="height: 100%; width: 50%;">
            <effectdata effect.bind="effect"></effectdata>
        </div> -->
        <div style="height: 100%;">
            <h6>Effect Zone</h6>
            <zone zone.bind="effect.zone"></zone>
        </div>
        <!-- Conditions -->
        <div style="height: 100%; width: 100%;">
            <!-- class="ms-auto" style="width: 50%" -->
            <h6>Effect Condition</h6>
            <condition condition.bind="effect.condition" parent.bind="effect"></condition>
        </div>
    </div>

    <!-- Children -->
    <div class="d-flex gap-3" style="width: 100%">
        <i>Children</i>
        <button class="btn btn-outline-dark btn-small btn-circle addEffect" click.trigger="addEffect()">
            <span>+</span>
        </button>
    </div>
    <effectui repeat.for="child of effect.effects" effect.bind="child" parent.bind="effect"></effectui>
</div>
