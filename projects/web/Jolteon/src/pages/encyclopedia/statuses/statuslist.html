<import from='./status'></import>
<import from="../../../components/modal/modal"></import>
<import from="../entitylist.less"></import>

<!-- creature status passives -->
<div if.bind="mode == 'creature'">

  <!-- Button trigger modal -->
  <button type="button" class="btn listMenu" data-bs-toggle="modal" data-bs-target="#statusSearchModal">Add Status</button>
  <button class="btn listMenu" click.trigger="clickCreate()">New Status</button>

  <!-- Modal -->
  <modal id="statusSearchModal" header="Status select" close.bind=false footer.bind=false>
    <statuslist mode="search" callbackadd.bind="s => clickAddToCreature(s)"></statuslist>
  </modal>

  <!-- creature status list -->
  <div class="list">
    <status repeat.for="status of statuses" view-model.ref="refs[$index]" mode.bind="mode" model.bind="status" isvignette.bind="true" callbackremove.bind="s => clickRemove(s)"></status>
  </div>

</div>


<!-- root or search -->
<div if.bind="mode == 'root' || mode == 'search'">

  <div>
    <button class="btn listMenu" click.trigger="refresh()">Refresh</button>
    <button class="btn listMenu" click.trigger="clickCreate()">New Status</button>
    <input type="string" value.bind="filter" change.trigger="onSearch()" placeholder="search..." />
  </div>

  <!-- root -->
  <div if.bind="mode == 'root'" class="list">
    <status repeat.for="status of filteredStatuses" model.bind="status" mode.bind="mode" isvignette.bind="true" callbackremove.bind="s => clickRemove(s)"></status>
  </div>
  <!-- search (add to creature) -->
  <div if.bind="mode == 'search'" class="list">
    <status repeat.for="status of filteredStatuses" model.bind="status" mode.bind="mode" isvignette.bind="true" data-bs-dismiss="modal" callbackadd.bind="callbackadd"></status>
  </div>

</div>
