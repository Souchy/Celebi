<import from='./spell'></import>
<import from="../../../components/modal/modal"></import>
<import from="../entitylist.less"></import>

<!-- creature spells -->
<div if.bind="mode == 'creature'">

  <!-- Button trigger modal -->
  <button type="button" class="btn listMenu" data-bs-toggle="modal" data-bs-target="#spellSearchModal">Add Spell</button>
  <button class="btn listMenu" click.trigger="clickCreate()">New Spell</button>

  <!-- Modal -->
  <modal id="spellSearchModal" header="Spell select" close.bind=false footer.bind=false>
    <spelllist mode="search" callbackadd.bind="s => clickAddToCreature(s)"></spelllist>
  </modal>

  <!-- creature spell list -->
  <div class="list">
    <spell repeat.for="spell of spells" view-model.ref="refs[$index]" mode.bind="mode" model.bind="spell" isvignette.bind="true" callbackremove.bind="s => clickRemove(s)"></spell>
  </div>

</div>


<!-- root or search -->
<div if.bind="mode == 'root' || mode == 'search'">

  <div>
    <button class="btn listMenu" click.trigger="refresh()">Refresh</button>
    <button class="btn listMenu" click.trigger="clickCreate()">New Spell</button>
    <input type="string" value.bind="filter" change.trigger="onSearch()" placeholder="search..." />
  </div>

  <!-- root -->
  <div if.bind="mode == 'root'" class="list">
    <spell repeat.for="spell of filteredSpells" view-model.ref="refs[$index]" mode.bind="mode" model.bind="spell" isvignette.bind="true" callbackremove.bind="s => clickRemove(s)"></spell>
  </div>
  <!-- search (add to creature) -->
  <div if.bind="mode == 'search'" class="list">
    <spell repeat.for="spell of filteredSpells" view-model.ref="refs[$index]" mode.bind="mode" model.bind="spell" isvignette.bind="true" data-bs-dismiss="modal" callbackadd.bind="callbackadd"></spell>
  </div>

</div>
