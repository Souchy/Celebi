<import from='./spell'></import>

<!-- creature spells -->
<div if.bind="mode == 'creature'">

  <!-- Button trigger modal -->
  <button type="button" class="btn listMenu" data-bs-toggle="modal" data-bs-target="#spellSearchModal">Add Spell</button>
  <button class="btn listMenu" click.trigger="clickCreate()">New Spell</button>

  <!-- Modal -->
  <div class="modal fade" id="spellSearchModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="spellSearchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="spellSearchModalLabel">Spell select</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <spelllist mode="search" creatureid.bind="creatureid" callbackadd.bind="s => clickAddToCreature(s)"></spelllist>
        </div>
        <div class="modal-footer"></div>
      </div>
    </div>
  </div>

  <!-- creature spell list -->
  <div class="list">
    <spell repeat.for="spell of spells" view-model.ref="refs[$index]" mode.bind="mode" model.bind="spell" isvignette.bind="true" 
        callbackremove.bind="s => clickRemove(s)"
    ></spell>
  </div>

</div>


<!-- root or search -->
<div if.bind="mode == 'root' || mode == 'search'">

  <div>
    <button class="btn listMenu" click.trigger="refresh()">Refresh</button>
    <button class="btn listMenu" click.trigger="clickCreate()">New Spell</button>
    <input type="string" value.bind="filter" change.trigger="onSearch()" placeholder="search..." />
  </div>

  <!-- root -->
  <div if.bind="mode == 'root'" class="list">
    <spell repeat.for="spell of filteredSpells" view-model.ref="refs[$index]" mode.bind="mode" model.bind="spell" isvignette.bind="true"
        callbackremove.bind="s => clickRemove(s)" 
    ></spell>
  </div>
  <!-- search (add to creature) -->
  <div if.bind="mode == 'search'" class="list">
    <spell repeat.for="spell of filteredSpells" view-model.ref="refs[$index]" mode.bind="mode" model.bind="spell" isvignette.bind="true" data-bs-dismiss="modal" 
        callbackadd.bind="callbackadd"
    ></spell>
  </div>

</div>
