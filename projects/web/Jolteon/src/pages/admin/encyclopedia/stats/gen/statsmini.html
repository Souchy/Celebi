<import from="./statpropertyselector"></import>
<import from="../../effects/modelSelector/effectModelSelector"></import>
<import from="../../../../../components/modal/modal"></import>


<button if.bind="hasadddelete" class="btn btn-outline btn-icon" data-bs-toggle="modal" data-bs-target="#statSelector-${stats.entityUid}">+</button>

<modal if.bind="stats && hasadddelete" id="statSelector-${stats.entityUid}" header="Add Stat" close.bind=false footer.bind=false>
  <statpropertyselector characs.bind="characsallowed" callbackselect.bind="s => onAddStat(s)"></statpropertyselector>
</modal>

<table class="table-striped table-sm table-borderless table-responsive-sm" if.bind="stats">
  <tbody>
    <!-- getDicValues -->
    <tr repeat.for="statid of getDicKeys">
      <td>${getCharacName(statid)}</td>


      <td if.bind="isSimple(statid)">
        <input type="number" value.bind="getBase(statid).value" change.trigger="onChangeStatValue" />
      </td>
      <td if.bind="isSimple(statid) && hasgrowth">
        (growth)
        <!-- ${statid.statId} ${getGrowth(statId)} -->
      </td>


      <td if.bind="isBool(statid)">
        <input type="checkbox" class="btn-check" id="btn-check-outlined ${statid}" autocomplete="off" checked.bind="getBase(statid).value" change.trigger="onChangeStatValue">
        <label class="btn btn-outline shadow-none" for="btn-check-outlined ${statid}">${getBase(statid).value ? 'True' : 'False'}</label><br>
      </td>
      <td if.bind="isBool(statid) && hasgrowth">
        (growth)
        <!-- ${statid.statId} ${getGrowth(statId)} -->
      </td>


      <td if.bind="isEnum(statid)">
        <!-- (${getEnum(statid)}: ${statid.value}) -->
        <template switch.bind="getEnum(statid)">
          <select case='StatusMergeStrategy' value.bind="getBase(statid).value" change.trigger="onChangeStatValue">
            <option repeat.for="val of Enums.statusMergeStrategies" model.bind="$index">${val}</option>
          </select>
          <select case='StatusUnbewitchStrategy' value.bind="getBase(statid).value" change.trigger="onChangeStatValue">
            <option repeat.for="val of Enums.statusUnbewitchStrategies" model.bind="$index">${val}</option>
          </select>
        </template>
      </td>
      <td if.bind="isEnum(statid) && hasgrowth">
        (growth)
      </td>


      <td if.bind="hasadddelete">
        <button class="btn btn-outline btn-icon" click.trigger="clickRemoveStat(statid)">x</button>
      </td>
    </tr>
  </tbody>
</table>
