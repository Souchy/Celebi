<import from="../../conditions/condition"></import>
<import from="../../../../../components/modal/modal"></import>
<import from="../../properties/propertygrid"></import>
<import from="../../zone/zone"></import>
<import from="../../../components/modelSelector/modelSelector"></import>

<!-- Trigger Zone -->
<div class="eblock" style="margin-right: 15px;">
  <h6 class="clickable" data-bs-toggle="collapse" data-bs-target="#collapseZone-${model.entityUid}">Zone</h6>
  <zone if.bind="model.zone" zone.bind="model.triggerZone" uid.bind="model.entityUid" callbacksave.bind="() => onSave()"></zone>
  <button else class="btn btn-floating">Set</button>
</div>

<!-- Conditions -->
<div>
  <h6>Triggerer Filter</h6>
  <condition parent.bind="model" parentPropertyName.bind="triggererFilter" model.bind="model.triggererFilter" callbacksave.bind="() => save()"></condition>
  <!-- <condition if.bind="model.triggererFilter" model.bind="model.triggererFilter" callbacksave.bind="() => save()"></condition>
  <button else class="btn btn-floating">Set</button> -->
  <h6>Holder Condition</h6>
  <condition parent.bind="model" parentPropertyName.bind="holderCondition" model.bind="model.holderCondition" callbacksave.bind="() => save()"></condition>
  <!-- <condition if.bind="model.holderCondition" model.bind="model.holderCondition" callbacksave.bind="() => save()"></condition>
  <button else class="btn btn-floating">Set</button> -->
</div>

<!-- Trigger OrderType -->
<div>
  <h6>OrderType</h6>
  <select value.bind="model.triggerOrderType" change.trigger="() => save()">
    <option repeat.for="e of Enums.triggerOrderTypes" model.bind="$index">${e}</option>
  </select>
</div>

<!-- Trigger Type -->
<div class="eblock" style="flex-grow: 1;">
  <h6>Schema ${model.entityUid}</h6>
  <button class="btn btn-floating btn-changeSchema" data-bs-toggle="modal" data-bs-target="#triggerSchemaTypeModal-${model.entityUid}">
    Change type
  </button>
  <modal id="triggerSchemaTypeModal-${model.entityUid}" header="Change Trigger schema type" close.bind=false footer.bind=false>
    <model-selector schemas.bind="schemas" onselectcallback.bind="e => onChangeSchemaType(e)"></model-selector>
  </modal>
  <propertygrid data.bind="model.schema" schema.bind="schema" uid.bind="model.entityUid" callbacksave.bind="() => onSave()"></propertygrid>
</div>
