<import from="../zone/zone"></import>
<import from="../strings/stringcomponent"></import>
<import from="../stats/gen/statsmini"></import>
<import from="../stats/gen/statpropertyselector"></import>

<div if.bind="data && schema">
  <!-- hi prop grid -->

  <table>
    <tbody>
      <tr class="property" repeat.for="prop of keys">
        <td style="padding-right: 8px; color: var(--accent2);" data-bs-toggle="collapse" data-bs-target="#collapseZone-${uid}-schema">
          ${prop}: 
          ${propName(prop)}
        </td>
        <td>
          <template switch.bind="propName(prop)">
      
            <zone uid="${uid}-schema" case="IZone" zone.bind="data[prop]" callbacksave.bind="() => onChange()"></zone>
      
            <select case='ElementType' value.bind="data[prop]" change.trigger="onChange()">
              <option repeat.for="e of Enums.elements" model.bind="$index">${e}</option>
            </select>
            <select case='ActorType' value.bind="data[prop]" change.trigger="onChange()">
              <option repeat.for="e of Enums.actors" model.bind="$index">${e}</option>
            </select>
            <select case='MomentType' value.bind="data[prop]" change.trigger="onChange()">
              <option repeat.for="e of Enums.momentTypes" model.bind="$index">${e}</option>
            </select>
      
            <statsmini case="IStats"           stats.bind="data[prop]" callbacksavestat.bind="() => onChange()" characsallowed.bind="Characteristics.allSectioned"></statsmini>
            <statsmini case="CreatureStats"    stats.bind="data[prop]" callbacksavestat.bind="() => onChange()" characsallowed.bind="Characteristics.creaturesSectioned"></statsmini>
            <statsmini case="StatusModelStats" stats.bind="data[prop]" callbacksavestat.bind="() => onChange()" characsallowed.bind="Characteristics.statusModels"></statsmini>
            <statsmini case="SpellModelStats"  stats.bind="data[prop]" callbacksavestat.bind="() => onChange()" characsallowed.bind="Characteristics.spellModels"></statsmini>
            <statsmini case="SpellStats"       stats.bind="data[prop]" callbacksavestat.bind="() => onChange()" characsallowed.bind="Characteristics.spells"></statsmini>


            <!-- stat : select charac id + value -->
            <!-- charac id selector -->
            <!-- iid selector:  string, creature(summon), spell, status, animation, scene/model asset  -->
            <input case="StringIID" type="text" value.bind="data[prop]" change.trigger="onChange()"/>
            <input case="CreatureIID" type="text" value.bind="data[prop]" change.trigger="onChange()"/>
            <input case="SpellIID" type="text" value.bind="data[prop]" change.trigger="onChange()"/>
            <input case="StatusIID" type="text" value.bind="data[prop]" change.trigger="onChange()"/>
            <input case="AssetIID" type="text" value.bind="data[prop]" change.trigger="onChange()"/>
            <input case="AnimationSetIID" type="text" value.bind="data[prop]" change.trigger="onChange()"/>
      
            <template default-case switch.bind="typeof(prop)">
              <input case="number" type="number" value.bind="data[prop]"  change.trigger="onChange()"/>
              <!-- <div case="string"> -->
                <!-- who even has a string property -->
                <!-- and more like a string selector than a string component -->
                <!-- stringcomponent (StringEntity?) -->
              <!-- </div> -->
              <div case="boolean">
                {bool}
                <!-- toggle button -->
                  <div style="margin: 5px;">
                      <input type="checkbox" class="btn-check" id="btn-check-outlined ${prop}" autocomplete="off" checked.bind="data[prop]" change.trigger="onChange()">
                      <!-- change.trigger="onChangeBase" -->
                      <label class="btn btn-outline shadow-none" for="btn-check-outlined ${prop}">${characName}</label><br>
                  </div>
              </div>
            </template>

          </template>
        </td>
      </tr>
    </tbody>
  </table>

</div>
